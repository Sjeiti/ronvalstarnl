{
  "id": 934,
  "date": "2012-05-25T12:47:34",
  "date_gmt": "2012-05-25T11:47:34",
  "guid": {
    "rendered": "http://ronvalstar.nl/?p=934"
  },
  "modified": "2014-05-06T17:51:26",
  "modified_gmt": "2014-05-06T17:51:26",
  "slug": "interactive-fluid-dynamics-in-javascript",
  "status": "publish",
  "type": "post",
  "link": "https://ronvalstar.nl/interactive-fluid-dynamics-in-javascript",
  "title": {
    "rendered": "Interactive fluid dynamics in Javascript"
  },
  "content": {
    "rendered": "<p>Don&#8217;t know why, but after seeing <a href=\"http://nerget.com/fluidSim/\">Oliver Hunt&#8217;s</a> fluid solver I wanted to use fluid dynamics on my site as an interactive particle flowfield.</p>\n<p><!--more--></p>\n<p>As you might suspect fluid dynamics is really complex stuff. In computational programming it is mimicked by using <a href=\"http://en.m.wikipedia.org/wiki/Navier%E2%80%93Stokes_equations\">Navier-Stokes equations</a>. Olivers fluid solver is based on a 2003 paper by <a href=\"http://www.dgp.toronto.edu/people/stam/reality/Research/pdf/GDC03.pdf\">Jos Stam</a> describing a fast implementation for realtime use.</p>\n<p>The first thing I did is grab his script and implement it roughly. Only it worked wrongly for non square images. So I looked around some more for other implementations of fluid dynamics and found one in Actionscript by <a href=\"http://blog.inspirit.ru/?p=248\">Eugene Zatepyakin</a>. Since Actionscript is my second language and Eugene is an excellent programmer I decided I&#8217;d port his code to Javascript (+Eugenes version had viscosity implemented).</p>\n<p>When I got the port up and running it ran faster than Olivers script but it had the same vertical vs horizontal discrepancy. Luckily, while optimizing, I found out why and fixed it.</p>\n<p>Porting stuff from C++ to Java to Actionscript to Javascript does not go by unpunished. The Webkit browers will run it quite nicely but Firefox really sucks at it (even moreso than IE).</p>\n<p>Here it is:</p>\n<p><iframe src=\"http://test.ronvalstar.nl/fluidSolver\" width=\"100%\" height=\"200px\"></iframe></p>\n<p>In the above implementation I&#8217;ve used the raw fluid in a canvas, and the red dots are tiny 1px divs above it. You can also watch it fullscreen from <a href=\"http://test.ronvalstar.nl/fluidSolver\">http://test.ronvalstar.nl/fluidSolver</a> or <a href=\"http://test.ronvalstar.nl/fluidSolver/fluidSolver.zip\">download the source</a>.</p>\n<p>With it I&#8217;ve made a minimal dusty look on <a href=\"/\">ronvalstar.nl</a> (only Webkit since Firefox and IE aren&#8217;t fast enough). It uses only the velocity field for the dust particles. It starts with a low number of particles that is in- or decremented depending on the framerate. The dust particles are influenced by mouse movement, but also by interacting with the menu and/or projects.</p>\n",
    "protected": false
  },
  "excerpt": {
    "rendered": "<p>Don&#8217;t know why, but after seeing Oliver Hunt&#8217;s fluid solver I wanted to use fluid dynamics on my site as an interactive particle flowfield.</p>\n",
    "protected": false
  },
  "author": 2,
  "featured_media": 2401,
  "comment_status": "open",
  "ping_status": "open",
  "sticky": false,
  "template": "",
  "format": "standard",
  "meta": [],
  "categories": [
    5,
    13,
    17
  ],
  "tags": [
    58,
    94
  ],
  "terms": {
    "post_tag": [
      {
        "term_id": 58,
        "name": "fluid dynamics",
        "slug": "fluid-dynamics",
        "term_group": 0,
        "term_taxonomy_id": 58,
        "taxonomy": "post_tag",
        "description": "",
        "parent": 0,
        "count": 1,
        "filter": "raw",
        "term_order": "0",
        "ID": 58
      },
      {
        "term_id": 94,
        "name": "port",
        "slug": "port",
        "term_group": 0,
        "term_taxonomy_id": 96,
        "taxonomy": "post_tag",
        "description": "",
        "parent": 0,
        "count": 1,
        "filter": "raw",
        "term_order": "0",
        "ID": 94
      }
    ],
    "category": [
      {
        "term_id": 5,
        "name": "code",
        "slug": "code",
        "term_group": 0,
        "term_taxonomy_id": 5,
        "taxonomy": "category",
        "description": "",
        "parent": 170,
        "count": 71,
        "filter": "raw",
        "term_order": "0",
        "ID": 5
      },
      {
        "term_id": 13,
        "name": "Javascript",
        "slug": "javascript",
        "term_group": 0,
        "term_taxonomy_id": 13,
        "taxonomy": "category",
        "description": "",
        "parent": 5,
        "count": 52,
        "filter": "raw",
        "term_order": "0",
        "ID": 13
      },
      {
        "term_id": 17,
        "name": "nature",
        "slug": "nature",
        "term_group": 0,
        "term_taxonomy_id": 17,
        "taxonomy": "category",
        "description": "",
        "parent": 0,
        "count": 3,
        "filter": "raw",
        "term_order": "0",
        "ID": 17
      }
    ]
  },
  "_links": {
    "self": [
      {
        "href": "https://ronvalstar.nl/api/wp/v2/posts/934"
      }
    ],
    "collection": [
      {
        "href": "https://ronvalstar.nl/api/wp/v2/posts"
      }
    ],
    "about": [
      {
        "href": "https://ronvalstar.nl/api/wp/v2/types/post"
      }
    ],
    "author": [
      {
        "embeddable": true,
        "href": "https://ronvalstar.nl/api/wp/v2/users/2"
      }
    ],
    "replies": [
      {
        "embeddable": true,
        "href": "https://ronvalstar.nl/api/wp/v2/comments?post=934"
      }
    ],
    "version-history": [
      {
        "count": 0,
        "href": "https://ronvalstar.nl/api/wp/v2/posts/934/revisions"
      }
    ],
    "wp:featuredmedia": [
      {
        "embeddable": true,
        "href": "https://ronvalstar.nl/api/wp/v2/media/2401"
      }
    ],
    "wp:attachment": [
      {
        "href": "https://ronvalstar.nl/api/wp/v2/media?parent=934"
      }
    ],
    "wp:term": [
      {
        "taxonomy": "category",
        "embeddable": true,
        "href": "https://ronvalstar.nl/api/wp/v2/categories?post=934"
      },
      {
        "taxonomy": "post_tag",
        "embeddable": true,
        "href": "https://ronvalstar.nl/api/wp/v2/tags?post=934"
      }
    ],
    "curies": [
      {
        "name": "wp",
        "href": "https://api.w.org/{rel}",
        "templated": true
      }
    ]
  }
}