{
  "id": 2477,
  "date": "2014-05-26T10:34:38",
  "date_gmt": "2014-05-26T10:34:38",
  "guid": {
    "rendered": "http://ronvalstar.nl/?p=2177"
  },
  "modified": "2014-08-14T09:25:59",
  "modified_gmt": "2014-08-14T09:25:59",
  "slug": "dry-responsive-javascript",
  "status": "publish",
  "type": "post",
  "link": "https://ronvalstar.nl/dry-responsive-javascript",
  "title": {
    "rendered": "DRY responsive Javascript"
  },
  "content": {
    "rendered": "<p>My <a href=\"/change-css-styles-at-the-root/\">last post</a> got me thinking when I was implementing responsive Javascript events (well, <a href=\"http://millermedeiros.github.io/js-signals/\" target=\"signals\">signals</a> really). I never liked it when similar things are defined or implemented multiple times. That is the reason why I tend to put classNames added through Javascript inside a value object, or why I wrote something to parse Less variables to Javascript. Long live DRY!</p>\n<p><!--more--></p>\n<p>So why define your responsive breakpoints in Javascript when they are already defined in your CSS? You&#8217;ll have to search a little since they are neatly tucked away inside your document.styleSheets object, but they are right there!</p>\n<p>The document.styleSheets object is structured like this:</p>\n<pre>document.styleSheets {StyleSheetList}\r\n |-[0] {CSSStyleSheet}\r\n |  |-cssRules {CSSRuleList}\r\n |  |  |-[0] {CSSRule}</pre>\n<p>CSSRule is an interface, so inside that CSSRuleList we can also find the <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/CSSMediaRule\" target=\"_blank\">CSSMediaRule</a> (its type is CSSRule.MEDIA_RULE).</p>\n<p>The actual media queries are in CSSMediaRule.media{MediaList}.<br />\nUnless your name is IE, then you&#8217;ll say you put stuff in your list but it&#8217;s really empty.</p>\n<p>The only tricky part is how to interpret this media query data correctly since the notation can vary quite a lot (although in practice only a limited amount of variations is used).<br />\nI&#8217;ve checked the possibilities described at <a href=\"http://www.w3.org/TR/css3-mediaqueries/\">at W3C</a> and decided that (for now) it&#8217;s safe enough to check on min- and max-width.</p>\n<p>This responsive Javascript is really nothing more than a proof of concept. I haven&#8217;t done any exhaustive testing other than see it working on the four most common browsers.</p>\n<p>A small sidenote about when the script should kick in. In practise DOMContentLoaded fires when the stylesheets are loaded, provided the script tag is after the link tag (for Webkit and Mozilla). In theory however, it shouldn&#8217;t. So we&#8217;re safer to use the good old Window load event here.</p>\n<pre><code data-language=\"javascript\" data-src=\"https://api.github.com/gists/23b99c384173a5bfc90a\"></code></pre>\n",
    "protected": false
  },
  "excerpt": {
    "rendered": "<p>My last post got me thinking when I was implementing responsive Javascript events (well, signals really). I never liked it when similar things are defined or implemented multiple times. That is the reason why I tend to put classNames added through Javascript inside a value object, or why I wrote something to parse Less variables [&hellip;]</p>\n",
    "protected": false
  },
  "author": 2,
  "featured_media": 2527,
  "comment_status": "open",
  "ping_status": "open",
  "sticky": false,
  "template": "",
  "format": "standard",
  "meta": [],
  "categories": [
    1,
    5,
    13
  ],
  "tags": [
    46,
    274
  ],
  "terms": {
    "post_tag": [
      {
        "term_id": 46,
        "name": "CSS",
        "slug": "css-2",
        "term_group": 0,
        "term_taxonomy_id": 46,
        "taxonomy": "post_tag",
        "description": "",
        "parent": 0,
        "count": 28,
        "filter": "raw",
        "term_order": "0",
        "ID": 46
      },
      {
        "term_id": 274,
        "name": "Javascript",
        "slug": "javascript",
        "term_group": 0,
        "term_taxonomy_id": 69,
        "taxonomy": "post_tag",
        "description": "",
        "parent": 0,
        "count": 53,
        "filter": "raw",
        "term_order": "0",
        "ID": 274
      }
    ],
    "category": [
      {
        "term_id": 1,
        "name": "uncategorized",
        "slug": "uncategorized",
        "term_group": 0,
        "term_taxonomy_id": 1,
        "taxonomy": "category",
        "description": "",
        "parent": 0,
        "count": 36,
        "filter": "raw",
        "term_order": "0",
        "ID": 1
      },
      {
        "term_id": 5,
        "name": "code",
        "slug": "code",
        "term_group": 0,
        "term_taxonomy_id": 5,
        "taxonomy": "category",
        "description": "",
        "parent": 170,
        "count": 71,
        "filter": "raw",
        "term_order": "0",
        "ID": 5
      },
      {
        "term_id": 13,
        "name": "Javascript",
        "slug": "javascript",
        "term_group": 0,
        "term_taxonomy_id": 13,
        "taxonomy": "category",
        "description": "",
        "parent": 5,
        "count": 52,
        "filter": "raw",
        "term_order": "0",
        "ID": 13
      }
    ]
  },
  "_links": {
    "self": [
      {
        "href": "https://ronvalstar.nl/api/wp/v2/posts/2477"
      }
    ],
    "collection": [
      {
        "href": "https://ronvalstar.nl/api/wp/v2/posts"
      }
    ],
    "about": [
      {
        "href": "https://ronvalstar.nl/api/wp/v2/types/post"
      }
    ],
    "author": [
      {
        "embeddable": true,
        "href": "https://ronvalstar.nl/api/wp/v2/users/2"
      }
    ],
    "replies": [
      {
        "embeddable": true,
        "href": "https://ronvalstar.nl/api/wp/v2/comments?post=2477"
      }
    ],
    "version-history": [
      {
        "count": 0,
        "href": "https://ronvalstar.nl/api/wp/v2/posts/2477/revisions"
      }
    ],
    "wp:featuredmedia": [
      {
        "embeddable": true,
        "href": "https://ronvalstar.nl/api/wp/v2/media/2527"
      }
    ],
    "wp:attachment": [
      {
        "href": "https://ronvalstar.nl/api/wp/v2/media?parent=2477"
      }
    ],
    "wp:term": [
      {
        "taxonomy": "category",
        "embeddable": true,
        "href": "https://ronvalstar.nl/api/wp/v2/categories?post=2477"
      },
      {
        "taxonomy": "post_tag",
        "embeddable": true,
        "href": "https://ronvalstar.nl/api/wp/v2/tags?post=2477"
      }
    ],
    "curies": [
      {
        "name": "wp",
        "href": "https://api.w.org/{rel}",
        "templated": true
      }
    ]
  }
}